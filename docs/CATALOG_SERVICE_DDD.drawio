<mxfile host="app.diagrams.net" modified="2025-12-18T18:30:00.000Z" agent="Mozilla/5.0" version="22.1.0" type="device">
  <diagram name="Catalog Service DDD" id="catalog-service-ddd">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="CATALOG SERVICE - DOMAIN LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="40" as="geometry"/>
        </mxCell>

        <!-- ==================== PRODUCT ENTITY ==================== -->
        <mxCell id="product-class" value="Product" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="320" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="product-stereotype" value="&lt;&lt;Entity / AggregateRoot&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="product-class">
          <mxGeometry y="30" width="320" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="product-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="product-class">
          <mxGeometry y="50" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="product-attrs" value="- id: Guid&#xa;- name: String&#xa;- description: String&#xa;- productCode: String&#xa;- price: Decimal&#xa;- isActive: Boolean&#xa;- category: ProductCategory&#xa;- imageUrl: String?&#xa;- tariffPlans: ICollection&lt;TariffPlan&gt;&#xa;- createdAt: DateTime&#xa;- updatedAt: DateTime?&#xa;- isDeleted: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="product-class">
          <mxGeometry y="58" width="320" height="170" as="geometry"/>
        </mxCell>
        <mxCell id="product-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="product-class">
          <mxGeometry y="228" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="product-methods" value="+ Product(name, description, productCode, price, category)&#xa;+ SetName(name: String): void&#xa;+ SetDescription(description: String): void&#xa;+ SetProductCode(productCode: String): void&#xa;+ SetPrice(price: Decimal): void&#xa;+ SetImageUrl(imageUrl: String?): void&#xa;+ Activate(): void&#xa;+ Deactivate(): void&#xa;+ MarkAsUpdated(): void&#xa;+ MarkAsDeleted(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="product-class">
          <mxGeometry y="236" width="320" height="144" as="geometry"/>
        </mxCell>

        <!-- ==================== TARIFFPLAN ENTITY ==================== -->
        <mxCell id="tariffplan-class" value="TariffPlan" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="400" y="80" width="320" height="380" as="geometry"/>
        </mxCell>
        <mxCell id="tariffplan-stereotype" value="&lt;&lt;Entity / AggregateRoot&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="tariffplan-class">
          <mxGeometry y="30" width="320" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="tariffplan-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="tariffplan-class">
          <mxGeometry y="50" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="tariffplan-attrs" value="- id: Guid&#xa;- name: String&#xa;- description: String&#xa;- monthlyFee: Decimal&#xa;- dataLimitGB: Int&#xa;- minutesLimit: Int&#xa;- smsLimit: Int&#xa;- isUnlimitedData: Boolean&#xa;- isActive: Boolean&#xa;- contractDurationMonths: Int&#xa;- productId: Guid?&#xa;- product: Product?&#xa;- createdAt: DateTime&#xa;- updatedAt: DateTime?&#xa;- isDeleted: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="tariffplan-class">
          <mxGeometry y="58" width="320" height="200" as="geometry"/>
        </mxCell>
        <mxCell id="tariffplan-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="tariffplan-class">
          <mxGeometry y="258" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="tariffplan-methods" value="+ TariffPlan(name, description, monthlyFee, ...)&#xa;+ SetName(name: String): void&#xa;+ SetDescription(description: String): void&#xa;+ SetMonthlyFee(monthlyFee: Decimal): void&#xa;+ SetUnlimitedData(isUnlimited: Boolean): void&#xa;+ AssignToProduct(productId: Guid): void&#xa;+ Activate(): void&#xa;+ Deactivate(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="tariffplan-class">
          <mxGeometry y="266" width="320" height="114" as="geometry"/>
        </mxCell>

        <!-- ==================== OFFERDETAILS ENTITY ==================== -->
        <mxCell id="offerdetails-class" value="OfferDetails" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="760" y="80" width="320" height="460" as="geometry"/>
        </mxCell>
        <mxCell id="offerdetails-stereotype" value="&lt;&lt;Entity / AggregateRoot&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="offerdetails-class">
          <mxGeometry y="30" width="320" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="offerdetails-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="offerdetails-class">
          <mxGeometry y="50" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="offerdetails-attrs" value="- id: Guid&#xa;- productId: Guid&#xa;- billingCycle: String&#xa;- detailedDescription: String&#xa;- speedBandwidth: String?&#xa;- dataLimit: String?&#xa;- technology: String?&#xa;- contractDurationMonths: Int?&#xa;- installationType: String?&#xa;- isAvailable: Boolean&#xa;- coverageArea: String?&#xa;- availableFrom: DateTime?&#xa;- availableUntil: DateTime?&#xa;- includedServices: String?&#xa;- promotions: String?&#xa;- bonusFeatures: String?&#xa;- eligibleCustomers: String?&#xa;- minimumAge: Int?&#xa;- product: Product?" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="offerdetails-class">
          <mxGeometry y="58" width="320" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="offerdetails-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="offerdetails-class">
          <mxGeometry y="318" width="320" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="offerdetails-methods" value="+ OfferDetails(productId, billingCycle, ...)&#xa;+ UpdateBasicInfo(...): void&#xa;+ UpdateTechnicalSpecs(...): void&#xa;+ UpdateAvailability(...): void&#xa;+ UpdateBenefits(...): void&#xa;+ UpdateEligibility(...): void&#xa;+ SetAvailability(isAvailable: Boolean): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="offerdetails-class">
          <mxGeometry y="326" width="320" height="134" as="geometry"/>
        </mxCell>

        <!-- ==================== BASEENTITY ==================== -->
        <mxCell id="baseentity-class" value="BaseEntity" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1120" y="80" width="280" height="200" as="geometry"/>
        </mxCell>
        <mxCell id="baseentity-stereotype" value="&lt;&lt;Abstract Class&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="baseentity-class">
          <mxGeometry y="30" width="280" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="baseentity-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="baseentity-class">
          <mxGeometry y="50" width="280" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="baseentity-attrs" value="# id: Guid&#xa;# createdAt: DateTime&#xa;# updatedAt: DateTime?&#xa;# isDeleted: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="baseentity-class">
          <mxGeometry y="58" width="280" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="baseentity-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="baseentity-class">
          <mxGeometry y="118" width="280" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="baseentity-methods" value="# BaseEntity()&#xa;# BaseEntity(id: Guid)&#xa;+ MarkAsUpdated(): void&#xa;+ MarkAsDeleted(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="baseentity-class">
          <mxGeometry y="126" width="280" height="74" as="geometry"/>
        </mxCell>

        <!-- ==================== IAGGREGATEROOT ==================== -->
        <mxCell id="iaggregateroot-class" value="IAggregateRoot" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1120" y="320" width="280" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="iaggregateroot-stereotype" value="&lt;&lt;Marker Interface&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="iaggregateroot-class">
          <mxGeometry y="30" width="280" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="iaggregateroot-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="iaggregateroot-class">
          <mxGeometry y="50" width="280" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="iaggregateroot-body" value="(empty - used for DDD identification)" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="iaggregateroot-class">
          <mxGeometry y="58" width="280" height="22" as="geometry"/>
        </mxCell>

        <!-- ==================== PRODUCTCATEGORY ENUM ==================== -->
        <mxCell id="productcategory-class" value="ProductCategory" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1120" y="440" width="280" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="productcategory-stereotype" value="&lt;&lt;Enumeration&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="productcategory-class">
          <mxGeometry y="30" width="280" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="productcategory-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="productcategory-class">
          <mxGeometry y="50" width="280" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="productcategory-values" value="Mobile = 1&#xa;Internet = 2&#xa;Television = 3&#xa;Bundle = 4&#xa;Device = 5&#xa;Accessory = 6" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="productcategory-class">
          <mxGeometry y="58" width="280" height="92" as="geometry"/>
        </mxCell>

        <!-- ==================== RELATIONSHIPS ==================== -->
        <!-- Product to TariffPlan (Composition 1 to *) -->
        <mxCell id="rel-product-tariff" value="1      *" style="endArrow=diamondThin;endFill=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="product-attrs" target="tariffplan-attrs">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="380" y="170" as="sourcePoint"/>
            <mxPoint x="400" y="170" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Product to OfferDetails (Association 1 to 1) -->
        <mxCell id="rel-product-offer" value="1      1" style="endArrow=open;endFill=0;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;" edge="1" parent="1" source="product-class" target="offerdetails-attrs">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="200" y="500" as="sourcePoint"/>
            <mxPoint x="760" y="200" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="200" y="560"/>
              <mxPoint x="700" y="560"/>
              <mxPoint x="700" y="216"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Inheritance arrows -->
        <mxCell id="rel-inherit1" value="" style="endArrow=block;endFill=0;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="product-class" target="baseentity-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="200" y="60" as="sourcePoint"/>
            <mxPoint x="1120" y="280" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="200" y="60"/>
              <mxPoint x="1100" y="60"/>
              <mxPoint x="1100" y="280"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ==================== APPLICATION LAYER TITLE ==================== -->
        <mxCell id="title-app" value="APPLICATION LAYER - SERVICES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="200" y="620" width="300" height="30" as="geometry"/>
        </mxCell>

        <!-- ==================== IPRODUCTSERVICE ==================== -->
        <mxCell id="iproductservice-class" value="IProductService" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="40" y="670" width="340" height="260" as="geometry"/>
        </mxCell>
        <mxCell id="iproductservice-stereotype" value="&lt;&lt;Interface&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="iproductservice-class">
          <mxGeometry y="30" width="340" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="iproductservice-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="iproductservice-class">
          <mxGeometry y="50" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="iproductservice-methods" value="+ GetByIdAsync(id, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ GetAllAsync(ct): Task&lt;Result&lt;IEnumerable&lt;ProductDto&gt;&gt;&gt;&#xa;+ GetActiveProductsAsync(ct): Task&lt;Result&lt;...&gt;&gt;&#xa;+ GetByCategoryAsync(cat, ct): Task&lt;Result&lt;...&gt;&gt;&#xa;+ CreateAsync(dto, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ UpdateAsync(id, dto, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ DeleteAsync(id, ct): Task&lt;Result&gt;&#xa;+ ActivateAsync(id, ct): Task&lt;Result&gt;&#xa;+ DeactivateAsync(id, ct): Task&lt;Result&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="iproductservice-class">
          <mxGeometry y="58" width="340" height="202" as="geometry"/>
        </mxCell>

        <!-- ==================== PRODUCTSERVICE ==================== -->
        <mxCell id="productservice-class" value="ProductService" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="420" y="670" width="340" height="310" as="geometry"/>
        </mxCell>
        <mxCell id="productservice-stereotype" value="&lt;&lt;Service&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="productservice-class">
          <mxGeometry y="30" width="340" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="productservice-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="productservice-class">
          <mxGeometry y="50" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="productservice-attrs" value="- _unitOfWork: IUnitOfWork&#xa;- _mapper: IMapper" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="productservice-class">
          <mxGeometry y="58" width="340" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="productservice-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="productservice-class">
          <mxGeometry y="94" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="productservice-methods" value="+ ProductService(unitOfWork, mapper)&#xa;+ GetByIdAsync(id, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ GetAllAsync(ct): Task&lt;Result&lt;IEnumerable&lt;ProductDto&gt;&gt;&gt;&#xa;+ GetActiveProductsAsync(ct): Task&lt;Result&lt;...&gt;&gt;&#xa;+ GetByCategoryAsync(cat, ct): Task&lt;Result&lt;...&gt;&gt;&#xa;+ CreateAsync(dto, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ UpdateAsync(id, dto, ct): Task&lt;Result&lt;ProductDto&gt;&gt;&#xa;+ DeleteAsync(id, ct): Task&lt;Result&gt;&#xa;+ ActivateAsync(id, ct): Task&lt;Result&gt;&#xa;+ DeactivateAsync(id, ct): Task&lt;Result&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="productservice-class">
          <mxGeometry y="102" width="340" height="208" as="geometry"/>
        </mxCell>

        <!-- Implements arrow -->
        <mxCell id="rel-impl-product-service" value="" style="endArrow=block;endFill=0;html=1;rounded=0;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="productservice-class" target="iproductservice-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="420" y="825" as="sourcePoint"/>
            <mxPoint x="380" y="825" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- ==================== INFRASTRUCTURE LAYER TITLE ==================== -->
        <mxCell id="title-infra" value="INFRASTRUCTURE LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="900" y="620" width="300" height="30" as="geometry"/>
        </mxCell>

        <!-- ==================== IPRODUCTREPOSITORY ==================== -->
        <mxCell id="iproductrepository-class" value="IProductRepository" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="800" y="670" width="340" height="220" as="geometry"/>
        </mxCell>
        <mxCell id="iproductrepository-stereotype" value="&lt;&lt;Interface&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="iproductrepository-class">
          <mxGeometry y="30" width="340" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="iproductrepository-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="iproductrepository-class">
          <mxGeometry y="50" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="iproductrepository-methods" value="+ GetByIdAsync(id, ct): Task&lt;Product?&gt;&#xa;+ GetByProductCodeAsync(code, ct): Task&lt;Product?&gt;&#xa;+ GetAllAsync(ct): Task&lt;IEnumerable&lt;Product&gt;&gt;&#xa;+ GetActiveProductsAsync(ct): Task&lt;IEnumerable&lt;Product&gt;&gt;&#xa;+ GetByCategoryAsync(cat, ct): Task&lt;IEnumerable&lt;Product&gt;&gt;&#xa;+ AddAsync(product, ct): Task&#xa;+ Update(product): void&#xa;+ Delete(product): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="iproductrepository-class">
          <mxGeometry y="58" width="340" height="162" as="geometry"/>
        </mxCell>

        <!-- ==================== UNITOFWORK ==================== -->
        <mxCell id="unitofwork-class" value="UnitOfWork" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1180" y="670" width="300" height="240" as="geometry"/>
        </mxCell>
        <mxCell id="unitofwork-stereotype" value="&lt;&lt;Infrastructure&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="unitofwork-class">
          <mxGeometry y="30" width="300" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="unitofwork-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="unitofwork-class">
          <mxGeometry y="50" width="300" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="unitofwork-attrs" value="- _context: CatalogDbContext&#xa;- _transaction: IDbContextTransaction?&#xa;+ Products: IProductRepository&#xa;+ TariffPlans: ITariffPlanRepository" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="unitofwork-class">
          <mxGeometry y="58" width="300" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="unitofwork-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="unitofwork-class">
          <mxGeometry y="118" width="300" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="unitofwork-methods" value="+ UnitOfWork(context)&#xa;+ SaveChangesAsync(ct): Task&lt;int&gt;&#xa;+ BeginTransactionAsync(ct): Task&#xa;+ CommitTransactionAsync(ct): Task&#xa;+ RollbackTransactionAsync(ct): Task&#xa;+ Dispose(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="unitofwork-class">
          <mxGeometry y="126" width="300" height="114" as="geometry"/>
        </mxCell>

        <!-- ==================== API LAYER TITLE ==================== -->
        <mxCell id="title-api" value="API LAYER - CONTROLLERS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="200" y="1010" width="300" height="30" as="geometry"/>
        </mxCell>

        <!-- ==================== PRODUCTSCONTROLLER ==================== -->
        <mxCell id="productscontroller-class" value="ProductsController" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="40" y="1060" width="340" height="300" as="geometry"/>
        </mxCell>
        <mxCell id="productscontroller-stereotype" value="&lt;&lt;ApiController&gt;&gt;" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=2;fontSize=10;" vertex="1" parent="productscontroller-class">
          <mxGeometry y="30" width="340" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="productscontroller-sep1" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="productscontroller-class">
          <mxGeometry y="50" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="productscontroller-attrs" value="- _productService: IProductService&#xa;- _logger: ILogger&lt;ProductsController&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="productscontroller-class">
          <mxGeometry y="58" width="340" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="productscontroller-sep2" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="productscontroller-class">
          <mxGeometry y="94" width="340" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="productscontroller-methods" value="+ GetAll(ct) [GET /api/products]&#xa;+ GetActive(ct) [GET /api/products/active]&#xa;+ GetById(id, ct) [GET /api/products/{id}]&#xa;+ GetByCategory(cat, ct) [GET .../category/{cat}]&#xa;+ Create(dto, ct) [POST /api/products]&#xa;+ Update(id, dto, ct) [PUT /api/products/{id}]&#xa;+ Delete(id, ct) [DELETE /api/products/{id}]&#xa;+ Activate(id, ct) [PATCH .../activate]&#xa;+ Deactivate(id, ct) [PATCH .../deactivate]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;" vertex="1" parent="productscontroller-class">
          <mxGeometry y="102" width="340" height="198" as="geometry"/>
        </mxCell>

        <!-- ==================== LEGEND ==================== -->
        <mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1200" y="1010" width="100" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-entity" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1040" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-entity-text" value="Entity / Implementation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1040" width="140" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-interface" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1070" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-interface-text" value="Interface" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1070" width="100" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-abstract" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1100" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-abstract-text" value="Abstract Class" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1100" width="100" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-enum" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1130" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-enum-text" value="Enumeration" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1130" width="100" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-controller" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1160" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-controller-text" value="Controller" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1230" y="1160" width="100" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
